<div class="wrap" role="main">
    <section class="hero" aria-labelledby="contact-heading">
        <div class="hero-head d-flex">
            <svg class="knight" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M12 52c0-10 8-12 12-16 4-4 6-10 6-10s-6-2-6-8c0-6 6-10 10-10s8 2 10 6c2 4 2 12 2 12s10 2 12 8v18H12z" fill="#ffeab3"/>
                <path d="M8 56h48v2H8z" fill="#222"/>
                <path d="M36 8c2 4 2 12 2 12s10 2 12 8v18H12c0-10 8-12 12-16 4-4 6-10 6-10s-6-2-6-8c0-6 6-10 10-10z" fill="#ffb347" opacity="0.18"/>
            </svg>
            <div>
                <h1 id="contact-heading">Contact Chess‑Nuts</h1>
                <p class="sub">Questions, bug reports, partnership inquiries, or coaching requests — we’re here to help.</p>
                <div class="features" aria-hidden="true">
                    <span class="chip">Live play & analysis</span>
                    <span class="chip">Tournaments</span>
                    <span class="chip">Accounts & ratings</span>
                </div>
            </div>
        </div>

        <% if (typeof success !== 'undefined' && success) { %>
            <div class="msg-success" role="status"><%= success %></div>
        <% } %>

        <% if (typeof errors !== 'undefined' && errors.length) { %>
            <div class="msg-error" role="alert">
                <strong>There were problems with your submission:</strong>
                <ul class="error-list">
                    <% errors.forEach(function(err){ %><li><%= err %></li><% }) %>
                </ul>
            </div>
        <% } %>

        <p class="meta">Prefer a faster reply? Check our FAQ or open a support ticket with your account email and a short description.</p>
    </section>

    <aside class="form" aria-labelledby="form-heading">
        <h2 id="form-heading" class="mb-0">Send us a message</h2>
        <p class="small">We aim to reply within 48 hours. Fields marked with * are required.</p>

        <form action="/contact" method="post" novalidate>
            <% if (typeof csrfToken !== 'undefined') { %>
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <% } %>

            <!-- Honeypot: leave blank -->
            <input type="text" name="website" class="d-none" tabindex="-1" autocomplete="off">

            <label for="name">Your name *</label>
            <input id="name" name="name" type="text" required maxlength="80" placeholder="e.g. Jane Doe" />

            <label for="email">Email address *</label>
            <input id="email" name="email" type="email" required maxlength="120" placeholder="you@example.com" />

            <div class="row">
                <div>
                    <label for="topic">Topic *</label>
                    <select id="topic" name="topic" required>
                        <option value="">— choose —</option>
                        <option value="support">Account / Support</option>
                        <option value="bug">Bug report</option>
                        <option value="partnership">Partnerships</option>
                        <option value="coaching">Coaching / Lessons</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div>
                    <label for="rating">Account username (optional)</label>
                    <input id="rating" name="username" type="text" maxlength="40" placeholder="chess_nut123" />
                </div>
            </div>

            <label for="message">Message *</label>
            <textarea id="message" name="message" required maxlength="4000" placeholder="Please describe your question or issue, include relevant links or PGN if applicable."></textarea>

            <div class="actions">
                <button type="submit" class="primary-btn">Send message</button>
                <a class="ghost" href="/faq">Visit FAQ</a>
                <span class="small ms-auto">Or email: <a href="mailto:support@chess-nuts.example" class="text-accent">support@chess-nuts.example</a></span>
            </div>
            <p class="small mt-1">By contacting us you agree to our <a href="/privacy" class="text-accent">privacy policy</a>. We keep personal data only as long as necessary to reply.</p>
        </form>

        <div class="mt-3 contact-info">
            <div class="contact-card">
                <strong>Business hours</strong>
                <div class="small">Mon–Fri 08:00–18:00 (UTC)</div>
                <div class="spacer" aria-hidden="true"></div>
                <strong>Partnerships</strong>
                <div class="small">partner@chess-nuts.example</div>

                <div class="socials" aria-label="Chess-Nuts social links">
                    <a href="#" title="Twitter">@ChessNuts</a>
                    <a href="#" title="Discord">Discord</a>
                    <a href="#" title="YouTube">YouTube</a>
                </div>
            </div>
        </div>
    </aside>
</div>